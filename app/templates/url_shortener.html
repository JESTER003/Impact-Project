{% extends "base.html" %}

{% block title %}URL Shortener{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-5">URL Shortener</h1>
<p class="mb-5 text-lg">This feature uses hashing to convert long URLs into short, unique identifiers. Hashing is a technique that maps data of arbitrary size to fixed-size values, making it efficient for quick lookups and ensuring uniqueness.</p>
<p class="mb-5 text-lg">Copy the new shorten url otherwise it will disappear in 5 seconds.</p>

<form method="POST" action="/url-shortener" class="mb-5">
    <input type="text" name="long_url" placeholder="Enter long URL" class="border p-2 w-full mb-2" required>
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Make it Short</button>
</form>

{% if error_message %}
<div class="bg-red-100 text-red-700 p-3 rounded mb-5">
    {{ error_message }}
</div>
{% endif %}

{% if short_url %}
<div id="short-url-container" class="bg-white p-4 rounded shadow">
    <p class="text-lg">Short URL: <a href="{{ short_url }}" target="_blank" class="text-blue-500">{{ short_url }}</a></p>
    <button onclick="copyToClipboard('{{ short_url }}')" class="bg-gray-300 text-black px-4 py-2 rounded mt-2">Copy</button>
</div>
<script>
    // Function to copy text to clipboard
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(function() {
            alert('Short URL copied to clipboard!');
        }, function(err) {
            console.error('Could not copy text: ', err);
        });
    }

    // Set a timeout to hide the short URL container after 5 seconds
    setTimeout(function() {
        const container = document.getElementById('short-url-container');
        if (container) {
            container.style.display = 'none';
        }
    }, 5000); // 5000 milliseconds = 5 seconds
</script>
{% endif %}

{% endblock %} 